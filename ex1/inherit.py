import requests
import re
import time
from fake_useragent import UserAgent

used_id=[]
url='https://baike.baidu.com/item/'
def req(url):
    # 发送HTTP GET请求并获取响应
    headers = {
        # 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/67.0.3396.99 Safari/537.36',
        'User-Agent':UserAgent().random,
          'Cookie':'BIDUPSID=ED979DA3AFB804D97E26E248F7212EBE; PSTM=1660702682; BAIDUID=ED979DA3AFB804D966F40484A837DDC2:FG=1; BAIDUID_BFESS=ED979DA3AFB804D966F40484A837DDC2:FG=1; __bid_n=1843de895f13bd146d4207; FEID=v10-ccb1226f5583b3544b6ba1c29303c972e231279c; BDRCVFR[-BxzrOzUsTb]=mk3SLVN4HKm; __xaf_thstime__=1672827892912; __xaf_fpstarttimer__=1672827940257; __xaf_fptokentimer__=1672827940487; delPer=0; BDUSS=m9vU0FpeDhtclllTEN4WlRPVTc2QTkxWmJUTDZxaGgxWm1JUHd2Z0o0cGtYd05rSUFBQUFBJCQAAAAAAAAAAAEAAAD4wzeQenh5dXB1cAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGTS22Nk0ttjZ; BDUSS_BFESS=m9vU0FpeDhtclllTEN4WlRPVTc2QTkxWmJUTDZxaGgxWm1JUHd2Z0o0cGtYd05rSUFBQUFBJCQAAAAAAAAAAAEAAAD4wzeQenh5dXB1cAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGTS22Nk0ttjZ; BDRCVFR[C0Dy3YlsNN0]=mbxnW11j9Dfmh7GuZR8mvqV; PSINO=6; BAIDU_WISE_UID=wapp_1676043295698_556; BDRCVFR[Fc9oatPmwxn]=aeXf-1x8UdYcs; jsdk-uuid=4b62ba04-f30e-41b2-b449-db5d79f8b24f; MBD_AT=0; H_PS_PSSID=38185_36544_38410_38355_38307_37861_38170_38289_38252_37927_38315_38382_38284_26350_38421_38282_37881; Hm_lvt_55b574651fcae74b0a9f1cf9c8d7c93a=1679546353; ZD_ENTRY=bing; BCLID=7871758546460591751; BDSFRCVID=btIOJeC62uP8Nf3fbKe-hDtZxms7v93TH6_nwNi4i7cXiCnZGDWyEG0PfU8g0Ku-a2p3ogKK3mOTHR8F_2uxOjjg8UtVJeC6EG0Ptf8g0M5; H_BDCLCKID_SF=tJKD_IDytK_3fP36qRbqMP4XheT22-usWJrt2hcH0KLKqR8CKJjDbxPVXGJuJjFjaIIHWfPEKfb1Mx7kbpovQxF13GjqBf62Wjra3l5TtUJ_8DnTDMRh-l8g5l3yKMnitKj9-pn4fpQrh459XP68bTkA5bjZKxtq3mkjbPbDfn02eCKuDjuaj53yja8s-460aK_L3bRVKbk_jR-k-PnVeT-QLPnZKxtqtjT2LUIb2JLhsloYXj5Sqt01XxbK0MTnWnFOWCjXbb7ljpj4MMrvXp-YDMo405OTa5-O0KJcbRoqeDT1hPJvyTtDXnO7QjvlXbrtXp7_2J0WStbKy4oTjxL1Db3JKjvMtIFtVD-aJCtKhD86en0_MPLLMfDX5-CsaIJC2hcH0KLKEnbpQtF5b6DfDfJuJjc3QetHKfJdJMb1Mx7k24Ta5PuiLqr9qx6kQmr3ah5TtUJ_8DnTDMRhXqLQetcyKMnitKj9-pn4fpQrh459XP68bTkA5bjZKxtq3mkjbPbDfn02eCKuj5_hD5jLDNtsbI6W56600jrJaDkVVIJOy4oTj6DdbMQ426JhtD3EXlC-fRn48KoD0MAb3MvBBUTE2JofaGvCXlAXBfTlERnoQft20-CIeMtjBbQuQ6482R7jWhk5Dq72yhKWQlRX5q79atTMfNTJ-qcH0KQpsIJM5-DWbT8EjHCqJ5Ketb-HV-35b5r8Db8k-PnVePD3ytnZKxtqtjTTVprDtbQDOnKzMMOMWRkDKNJqq6JnWncdWt3k2CbEMnOyMfb_Wx-v3pr405OT5HIO0KJcb66Hh4tRhPJvyTtDXnO7QjvlXbrtXp7_2J0WStbKy4oTjxL1Db3JKjvMtgDtVJO-KKChhD_GeMK; BCLID_BFESS=7871758546460591751; BDSFRCVID_BFESS=btIOJeC62uP8Nf3fbKe-hDtZxms7v93TH6_nwNi4i7cXiCnZGDWyEG0PfU8g0Ku-a2p3ogKK3mOTHR8F_2uxOjjg8UtVJeC6EG0Ptf8g0M5; H_BDCLCKID_SF_BFESS=tJKD_IDytK_3fP36qRbqMP4XheT22-usWJrt2hcH0KLKqR8CKJjDbxPVXGJuJjFjaIIHWfPEKfb1Mx7kbpovQxF13GjqBf62Wjra3l5TtUJ_8DnTDMRh-l8g5l3yKMnitKj9-pn4fpQrh459XP68bTkA5bjZKxtq3mkjbPbDfn02eCKuDjuaj53yja8s-460aK_L3bRVKbk_jR-k-PnVeT-QLPnZKxtqtjT2LUIb2JLhsloYXj5Sqt01XxbK0MTnWnFOWCjXbb7ljpj4MMrvXp-YDMo405OTa5-O0KJcbRoqeDT1hPJvyTtDXnO7QjvlXbrtXp7_2J0WStbKy4oTjxL1Db3JKjvMtIFtVD-aJCtKhD86en0_MPLLMfDX5-CsaIJC2hcH0KLKEnbpQtF5b6DfDfJuJjc3QetHKfJdJMb1Mx7k24Ta5PuiLqr9qx6kQmr3ah5TtUJ_8DnTDMRhXqLQetcyKMnitKj9-pn4fpQrh459XP68bTkA5bjZKxtq3mkjbPbDfn02eCKuj5_hD5jLDNtsbI6W56600jrJaDkVVIJOy4oTj6DdbMQ426JhtD3EXlC-fRn48KoD0MAb3MvBBUTE2JofaGvCXlAXBfTlERnoQft20-CIeMtjBbQuQ6482R7jWhk5Dq72yhKWQlRX5q79atTMfNTJ-qcH0KQpsIJM5-DWbT8EjHCqJ5Ketb-HV-35b5r8Db8k-PnVePD3ytnZKxtqtjTTVprDtbQDOnKzMMOMWRkDKNJqq6JnWncdWt3k2CbEMnOyMfb_Wx-v3pr405OT5HIO0KJcb66Hh4tRhPJvyTtDXnO7QjvlXbrtXp7_2J0WStbKy4oTjxL1Db3JKjvMtgDtVJO-KKChhD_GeMK; ZFY=RxBxTm3czV7dHvXaZwiQoQhgEn3xsJH6HRhtlJ65Mpk:C; FPTOKEN=iLQC+dExag4hV2Sc/R/t1GQqbr2gxwQOQ4EOVesMs9BIkRtM0pGivbUwfOTagqqDpBHQtzRZ0XLy0et/zBDZjEPb5i7FtECwmB33EmVVDxC2Nw+jUUTmCXZHQipY9OFnL0mis//s6r8M/Dtf79NnDChZWK3kC+FeCb0vpDMioYkJmSJMmHhtOOM5O8NagXOzoRjtamR4bKrxU6FmakiRoZhFgaKIAzM8xBHnU+h1wGy2vqdSRmbShTSpj6WsZ1tbSQOepFLt3GpN0/XXQ+U/euICZNZQyS0QwZL766oSOwhtq7A3GNza5z+9RXa2eLLuJ3yQDvBrWs6GhzXAVnXmCY71L6ZYmu8wQ6Jwfovbhf8CHf0B4cxtMCT3bNO7IZ0zOsVRm57qI81lBCH1OLnkEw==|pBA4xzBgkAJP2ZL+Ll1bGLnCyy9o8I+Mp1Ebi+GgWdA=|10|63042fddb8d918f3cecab83257ffa414; baikeVisitId=70a2ec21-a2a0-4b04-9eee-0c800ea4c33f; BK_SEARCHLOG=%7B%22key%22%3A%5B%22%E8%94%A1%E5%BE%90%E5%9D%A4%22%2C%22%E9%BB%84%E6%99%93%E6%98%8E%22%2C%22%E9%99%88%E5%98%89%E5%BA%9A%22%5D%7D; X_ST_FLOW=0; Hm_lpvt_55b574651fcae74b0a9f1cf9c8d7c93a=1681743872; RT="z=1&dm=baidu.com&si=8be12692-23b2-4647-9a5e-f960da5482b0&ss=lgkxjhzy&sl=10&tt=n1o&bcn=https%3A%2F%2Ffclog.baidu.com%2Flog%2Fweirwood%3Ftype%3Dperf"; ab_sr=1.0.1_NDNlMGY2YjM5ZTc3NWU1ZWQzYTczMGI0ZjI1NTJhYjAzZTlhMzhhOTdkMTFlYTM3NzE0NTM4MGU3MTU3YTI0MzI0NTI3MmIzOGQ5MjI2MTI4NjMxNjY4ZTQ1OWM5NGQzMWNiOGM2ZGNlOGM4MWQ3ZmNjYjA5OTI0ZDU4Mjk1MGQ3NmMyMjRiNTIxZTRmODFjY2ZkNzdlNzQyZmFmOTdmODRiMmM5ZTkxNTdlNjM5M2NlMmEyOGM2ZWIxYzExOGZk'
        # 'Cookie':'BIDUPSID=ED979DA3AFB804D97E26E248F7212EBE; PSTM=1660702682; BAIDUID=ED979DA3AFB804D966F40484A837DDC2:FG=1; BAIDUID_BFESS=ED979DA3AFB804D966F40484A837DDC2:FG=1; __bid_n=1843de895f13bd146d4207; FEID=v10-ccb1226f5583b3544b6ba1c29303c972e231279c; BDRCVFR[-BxzrOzUsTb]=mk3SLVN4HKm; __xaf_thstime__=1672827892912; __xaf_fpstarttimer__=1672827940257; __xaf_fptokentimer__=1672827940487; delPer=0; BDUSS=m9vU0FpeDhtclllTEN4WlRPVTc2QTkxWmJUTDZxaGgxWm1JUHd2Z0o0cGtYd05rSUFBQUFBJCQAAAAAAAAAAAEAAAD4wzeQenh5dXB1cAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGTS22Nk0ttjZ; BDUSS_BFESS=m9vU0FpeDhtclllTEN4WlRPVTc2QTkxWmJUTDZxaGgxWm1JUHd2Z0o0cGtYd05rSUFBQUFBJCQAAAAAAAAAAAEAAAD4wzeQenh5dXB1cAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGTS22Nk0ttjZ; BDRCVFR[C0Dy3YlsNN0]=mbxnW11j9Dfmh7GuZR8mvqV; PSINO=6; BAIDU_WISE_UID=wapp_1676043295698_556; BDRCVFR[Fc9oatPmwxn]=aeXf-1x8UdYcs; jsdk-uuid=4b62ba04-f30e-41b2-b449-db5d79f8b24f; MBD_AT=0; H_PS_PSSID=38185_36544_38410_38355_38307_37861_38170_38289_38252_37927_38315_38382_38284_26350_38421_38282_37881; Hm_lvt_55b574651fcae74b0a9f1cf9c8d7c93a=1679546353; BK_SEARCHLOG=%7B%22key%22%3A%5B%22%E8%94%A1%E5%BE%90%E5%9D%A4%22%2C%22%E9%99%88%E5%98%89%E5%BA%9A%22%5D%7D; ZD_ENTRY=bing; BCLID=7871758546460591751; BDSFRCVID=btIOJeC62uP8Nf3fbKe-hDtZxms7v93TH6_nwNi4i7cXiCnZGDWyEG0PfU8g0Ku-a2p3ogKK3mOTHR8F_2uxOjjg8UtVJeC6EG0Ptf8g0M5; H_BDCLCKID_SF=tJKD_IDytK_3fP36qRbqMP4XheT22-usWJrt2hcH0KLKqR8CKJjDbxPVXGJuJjFjaIIHWfPEKfb1Mx7kbpovQxF13GjqBf62Wjra3l5TtUJ_8DnTDMRh-l8g5l3yKMnitKj9-pn4fpQrh459XP68bTkA5bjZKxtq3mkjbPbDfn02eCKuDjuaj53yja8s-460aK_L3bRVKbk_jR-k-PnVeT-QLPnZKxtqtjT2LUIb2JLhsloYXj5Sqt01XxbK0MTnWnFOWCjXbb7ljpj4MMrvXp-YDMo405OTa5-O0KJcbRoqeDT1hPJvyTtDXnO7QjvlXbrtXp7_2J0WStbKy4oTjxL1Db3JKjvMtIFtVD-aJCtKhD86en0_MPLLMfDX5-CsaIJC2hcH0KLKEnbpQtF5b6DfDfJuJjc3QetHKfJdJMb1Mx7k24Ta5PuiLqr9qx6kQmr3ah5TtUJ_8DnTDMRhXqLQetcyKMnitKj9-pn4fpQrh459XP68bTkA5bjZKxtq3mkjbPbDfn02eCKuj5_hD5jLDNtsbI6W56600jrJaDkVVIJOy4oTj6DdbMQ426JhtD3EXlC-fRn48KoD0MAb3MvBBUTE2JofaGvCXlAXBfTlERnoQft20-CIeMtjBbQuQ6482R7jWhk5Dq72yhKWQlRX5q79atTMfNTJ-qcH0KQpsIJM5-DWbT8EjHCqJ5Ketb-HV-35b5r8Db8k-PnVePD3ytnZKxtqtjTTVprDtbQDOnKzMMOMWRkDKNJqq6JnWncdWt3k2CbEMnOyMfb_Wx-v3pr405OT5HIO0KJcb66Hh4tRhPJvyTtDXnO7QjvlXbrtXp7_2J0WStbKy4oTjxL1Db3JKjvMtgDtVJO-KKChhD_GeMK; BCLID_BFESS=7871758546460591751; BDSFRCVID_BFESS=btIOJeC62uP8Nf3fbKe-hDtZxms7v93TH6_nwNi4i7cXiCnZGDWyEG0PfU8g0Ku-a2p3ogKK3mOTHR8F_2uxOjjg8UtVJeC6EG0Ptf8g0M5; H_BDCLCKID_SF_BFESS=tJKD_IDytK_3fP36qRbqMP4XheT22-usWJrt2hcH0KLKqR8CKJjDbxPVXGJuJjFjaIIHWfPEKfb1Mx7kbpovQxF13GjqBf62Wjra3l5TtUJ_8DnTDMRh-l8g5l3yKMnitKj9-pn4fpQrh459XP68bTkA5bjZKxtq3mkjbPbDfn02eCKuDjuaj53yja8s-460aK_L3bRVKbk_jR-k-PnVeT-QLPnZKxtqtjT2LUIb2JLhsloYXj5Sqt01XxbK0MTnWnFOWCjXbb7ljpj4MMrvXp-YDMo405OTa5-O0KJcbRoqeDT1hPJvyTtDXnO7QjvlXbrtXp7_2J0WStbKy4oTjxL1Db3JKjvMtIFtVD-aJCtKhD86en0_MPLLMfDX5-CsaIJC2hcH0KLKEnbpQtF5b6DfDfJuJjc3QetHKfJdJMb1Mx7k24Ta5PuiLqr9qx6kQmr3ah5TtUJ_8DnTDMRhXqLQetcyKMnitKj9-pn4fpQrh459XP68bTkA5bjZKxtq3mkjbPbDfn02eCKuj5_hD5jLDNtsbI6W56600jrJaDkVVIJOy4oTj6DdbMQ426JhtD3EXlC-fRn48KoD0MAb3MvBBUTE2JofaGvCXlAXBfTlERnoQft20-CIeMtjBbQuQ6482R7jWhk5Dq72yhKWQlRX5q79atTMfNTJ-qcH0KQpsIJM5-DWbT8EjHCqJ5Ketb-HV-35b5r8Db8k-PnVePD3ytnZKxtqtjTTVprDtbQDOnKzMMOMWRkDKNJqq6JnWncdWt3k2CbEMnOyMfb_Wx-v3pr405OT5HIO0KJcb66Hh4tRhPJvyTtDXnO7QjvlXbrtXp7_2J0WStbKy4oTjxL1Db3JKjvMtgDtVJO-KKChhD_GeMK; ZFY=RxBxTm3czV7dHvXaZwiQoQhgEn3xsJH6HRhtlJ65Mpk:C; X_ST_FLOW=0; ab_sr=1.0.1_MTAzNmY1OWVjYjlhNzlkOTRmN2MzNDVkZGQ2MzlkZjk3YTliODE0MWVjM2IxYmZkZWMxZjVjMmMzYmNlNjEzZmRjZWNkMDllMDRmZTBmMjY3NTcwMTY3MjM3MTYwNTc0ODEwNjkyMmI1OWQzNGYyMDk4MWRlYjljYzVjNjg4MjZiOWVhZGZjZDY3YTIyZDVlM2UyY2ZjMTk4ZGM3ZGNhMGYwNGY1YjRmMzdhMzlmMzdmZGQ4NjU5ZDhkZjczM2Qw; FPTOKEN=iLQC+dExag4hV2Sc/R/t1GQqbr2gxwQOQ4EOVesMs9BIkRtM0pGivbUwfOTagqqDpBHQtzRZ0XLy0et/zBDZjEPb5i7FtECwmB33EmVVDxC2Nw+jUUTmCXZHQipY9OFnL0mis//s6r8M/Dtf79NnDChZWK3kC+FeCb0vpDMioYkJmSJMmHhtOOM5O8NagXOzoRjtamR4bKrxU6FmakiRoZhFgaKIAzM8xBHnU+h1wGy2vqdSRmbShTSpj6WsZ1tbSQOepFLt3GpN0/XXQ+U/euICZNZQyS0QwZL766oSOwhtq7A3GNza5z+9RXa2eLLuJ3yQDvBrWs6GhzXAVnXmCY71L6ZYmu8wQ6Jwfovbhf8CHf0B4cxtMCT3bNO7IZ0zOsVRm57qI81lBCH1OLnkEw==|pBA4xzBgkAJP2ZL+Ll1bGLnCyy9o8I+Mp1Ebi+GgWdA=|10|63042fddb8d918f3cecab83257ffa414; Hm_lpvt_55b574651fcae74b0a9f1cf9c8d7c93a=1681741895; RT="z=1&dm=baidu.com&si=8be12692-23b2-4647-9a5e-f960da5482b0&ss=lgkxjhzy&sl=3&tt=287&bcn=https%3A%2F%2Ffclog.baidu.com%2Flog%2Fweirwood%3Ftype%3Dperf"; baikeVisitId=0bf2c583-bb7e-4d9c-a864-31ad64694fad'
    }
    response = requests.get(url,headers=headers) 
    num=re.findall(r'data-lemmaId="(.*?)"',response.text,re.S)
    #.encode('utf-8').decode("unicode_escape")
    t=-1
    if len(num):
        t=num[0]
    return t

def dfs(name):
    url1=url+name
    num=req(url1) 
    if num in used_id:
        return 
    print('查询到:',name)
    used_id.append(num)  
    if num==-1:
        print('Num not found')
        return 
    url2='https://baike.baidu.com/starmap/api/gethumanrelationcard?lemmaId='+str(num)+'&lemmaTitle='+name
    # print(url2)
    res=requests.get(url2)
    lists=res.json()["list"]
    if len(lists)==0:
        return
    for list in lists:
        # print(list['relationName'],' : ',list['lemmaTitle'])
        name=list['lemmaTitle']
        time.sleep(1)
        dfs(name)   


name=input('请输入姓名:')
dfs(name)